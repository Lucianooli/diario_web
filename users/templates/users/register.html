<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="../../static/users/images/favicon.2.png" type="image/x-icon">
    <link rel="stylesheet" href="../../static/users/css/register.css">
    <title>|Di√°rio Virtual| Registrar |</title>
</head>
<body>
    <a href="{% url 'index' %}">
        <button class="diario_pag">Pagina Inicial</button>
    </a>
    <div class="container">
        <div class="register-box">
            <h2>Registrar</h2>
            <form action="{% url 'register' %}" method="post">
                {% csrf_token %}
                {{ form.non_field_errors }}
                <div class="text1">
                    <label for="{{ form.username.id_for_label }}" class="text_user">Usu√°rio:</label>
                    {{ form.username }}
                    {{ form.username.errors }}
                </div>
                <div class="text2">
                    <label for="{{ form.password1.id_for_label }}" class="text_senha">Senha:</label>
                    {{ form.password1}}
                    {{ form.password1.errors}}
                </div>
                <div class="text3">
                    <label for="{{ form.password2.id_for_label }}" class="text_senha2">Confirme a senha:</label>
                    {{ form.password2}}
                    <span id="password-confirm-message" style="color: red; display: none;" class="erro1">ü¶á(AS SENHAS N√ÉO COINCIDEM.)ü¶á</span>
                    <span id="password-format-message" class="erro2" style="display: none;">ü¶á(A SENHA DEVE CONTER PELO MENOS UMA LETRA E UM N√öMERO.)ü¶á</span>
                    <span id="username-format-message" class="erro3" style=" display: none;">ü¶á(O NOME DEVE CONTER LETRAS E N√öMEROS OU UM DOS S√çMBOLOS @, ., +, -, _.)ü¶á</span>
            <form action="{% url 'register' %}" method="post">
                </div>
                
                
                    <p class="p1">ü¶áNome Somente letras, d√≠gitos e @/./+/-/_ü¶á</p>
                    <p class="p2">ü¶áNome deve conter letras e um dos simbolos acimaü¶á</p>
                    <p class="p3">ü¶áSua senha deve conter pelo menos 8 caracteresü¶á</p>
                    <p class="p4">ü¶áSua senha deve conter n√∫meros e letrasü¶á</p>
                    <p class="p5">ü¶áDigite a mesma senha de antes, para verifica√ß√£oü¶á</p>
                
                
                <button type="submit" class="botao">Registrar</button>
                <input type="hidden" name="next" value="{% url 'index' %}">
            </form>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.querySelector('form');
    
            form.addEventListener('submit', function(event) {
                const username = form.querySelector('#{{ form.username.id_for_label }}').value;
                const password1 = form.querySelector('#{{ form.password1.id_for_label }}').value;
                const password2 = form.querySelector('#{{ form.password2.id_for_label }}').value;
                const errorSpan = document.getElementById('password-confirm-message');
                const formatErrorSpan = document.getElementById('password-format-message');
                const usernameErrorSpan = document.getElementById('username-format-message');
    
                // Verifica se as senhas s√£o iguais
                if (password1 !== password2) {
                    errorSpan.style.display = 'block';  // Mostra a mensagem de erro
                    event.preventDefault();  // Impede o envio do formul√°rio
                } else {
                    errorSpan.style.display = 'none';  // Esconde a mensagem de erro, se estiver vis√≠vel
                }
    
                // Verifica se a senha cont√©m pelo menos uma letra e um n√∫mero
                const passwordRegex = /^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$/;
                if (!passwordRegex.test(password1)) {
                    formatErrorSpan.style.display = 'block';  // Mostra a mensagem de erro de formato
                    event.preventDefault();  // Impede o envio do formul√°rio
                } else {
                    formatErrorSpan.style.display = 'none';  // Esconde a mensagem de erro de formato, se estiver vis√≠vel
                }
    
                // Verifica se o nome de usu√°rio cont√©m pelo menos uma letra e um dos s√≠mbolos permitidos
                const usernameRegex = /^(?=.*[A-Za-z])(?=.*[@.+-_]).+$/;
                if (!usernameRegex.test(username)) {
                    usernameErrorSpan.style.display = 'block';  // Mostra a mensagem de erro de formato do nome
                    event.preventDefault();  // Impede o envio do formul√°rio
                } else {
                    usernameErrorSpan.style.display = 'none';  // Esconde a mensagem de erro de formato do nome, se estiver vis√≠vel
                }
            });
        });
        </script>
</body>
</html>
